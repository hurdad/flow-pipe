namespace:
  create: true
  name: flow-pipe

# --------------------------------------------------
# Etcd (used by API + controller)
# --------------------------------------------------
etcd:
  enabled: true
  image: quay.io/coreos/etcd:v3.5.12
  replicas: 1
  port: 2379
  storage:
    size: 5Gi
  # Computed into ETCD_ENDPOINTS
  endpoints:
    - http://flow-pipe-etcd:2379

# --------------------------------------------------
# Controller
# --------------------------------------------------
controller:
  image: ghcr.io/hurdad/flow-pipe-controller:main
  replicas: 1
  port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

# --------------------------------------------------
# API
# --------------------------------------------------
api:
  enabled: true
  image: ghcr.io/hurdad/flow-pipe-api:main
  replicas: 1

  # These map directly to env vars
  grpcAddr: ":9090"
  httpAddr: ":8080"

  # Used only for container/service ports
  grpcPort: 9090
  httpPort: 8080

  ingress:
    enabled: false
    host: flow-pipe.local
